test compile precise-output
target x86_64

function %f1(i8x16) -> i8 {
block0(v0: i8x16):
  v1 = vhigh_bits.i8 v0
  return v1
}

; VCode:
;   push rbp
;   mov rbp, rsp
; block0:
;   pmovmskb eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret
; 
; Disassembled:
; block0: ; offset 0x0
;   push rbp
;   mov rbp, rsp
; block1: ; offset 0x4
;   pmovmskb eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret

function %f2(i8x16) -> i16 {
block0(v0: i8x16):
  v1 = vhigh_bits.i16 v0
  return v1
}

; VCode:
;   push rbp
;   mov rbp, rsp
; block0:
;   pmovmskb eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret
; 
; Disassembled:
; block0: ; offset 0x0
;   push rbp
;   mov rbp, rsp
; block1: ; offset 0x4
;   pmovmskb eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret

function %f3(i16x8) -> i8 {
block0(v0: i16x8):
  v1 = vhigh_bits.i8 v0
  return v1
}

; VCode:
;   push rbp
;   mov rbp, rsp
; block0:
;   movdqa xmm2, xmm0
;   packsswb xmm2, xmm2, xmm0
;   pmovmskb eax, xmm2
;   shr rax, rax, 0x8
;   mov rsp, rbp
;   pop rbp
;   ret
; 
; Disassembled:
; block0: ; offset 0x0
;   push rbp
;   mov rbp, rsp
; block1: ; offset 0x4
;   movdqa xmm2, xmm0
;   packsswb xmm2, xmm0
;   pmovmskb eax, xmm2
;   shr rax, 8
;   mov rsp, rbp
;   pop rbp
;   ret

function %f4(i32x4) -> i8 {
block0(v0: i32x4):
  v1 = vhigh_bits.i8 v0
  return v1
}

; VCode:
;   push rbp
;   mov rbp, rsp
; block0:
;   movmskps eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret
; 
; Disassembled:
; block0: ; offset 0x0
;   push rbp
;   mov rbp, rsp
; block1: ; offset 0x4
;   movmskps eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret

function %f5(i64x2) -> i8 {
block0(v0: i64x2):
  v1 = vhigh_bits.i8 v0
  return v1
}

; VCode:
;   push rbp
;   mov rbp, rsp
; block0:
;   movmskpd eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret
; 
; Disassembled:
; block0: ; offset 0x0
;   push rbp
;   mov rbp, rsp
; block1: ; offset 0x4
;   movmskpd eax, xmm0
;   mov rsp, rbp
;   pop rbp
;   ret

